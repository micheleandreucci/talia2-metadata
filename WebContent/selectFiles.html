<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	crossorigin="anonymous">
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<style>
input[type=checkbox] {
	zoom: 1.5;
	margin-left: 50%;
}

#main {
	zoom: 1.5;
	margin-left: 7%;
}
</style>
</head>
<script>
	var collezioni = Array();
	var checkboxes = [];
</script>
<body>
	<table class='table'>
		<thead class='thead-dark'>
			<th scope='col'>
				<div class='form-row'>
					<div class='form-group col-md-4'>
						<label for='inputFilter'>Filters</label> <select id='inputFilter'
							name='filters' class='form-control'>
							<option selected value='All'>All</option>
						</select>
					</div>

					<div class='form-group col-md-3'>
						<label for='sendFile' style='opacity: 0'>files</label>
						<button type='button' class='form-control btn-success'
							data-toggle='modal' data-target='#myModal'>Send</button>
						<div class='modal fade' id='myModal' role='dialog'>
							<div class='modal-dialog'>
								<div class='modal-content'>
									<div class='modal-header'>
										<button type='button' class='close' data-dismiss='modal'>&times;</button>
									</div>
									<div class='modal-body'>
										<p class='text-dark'>
											Collection name</br>
										</p>
										<div class="form-group row">
											<div class="col-sm-5">
												<select id='collname' name='collname' class='form-control'>
													<option value="new">new</option>
												</select>
											</div>
											<div class="col-sm-5">
												<input type="text" class="form-control" name="newcollection"
													id="newcollection" style="display: inline;"
													placeholder="New collection name">
											</div>
										</div>
										<p class='text-dark'>
											Filters</br>
										<div class="form-group row">
											<div class="col-sm-10">
												<input type="text" class="form-control" name="filterspart"
													placeholder="Specify filters">
											</div>
										</div>
										</p>
										<p class='text-dark'>
											Prefix</br>
										<div class="form-group row">
											<div class="col-sm-10">
												<input type="text" class="form-control" name="prefixpart"
													placeholder="Specify prefix">
											</div>
										</div>
										</p>

									</div>

									<div class='modal-footer'>
										<input type='submit' class='btn btn-primary mr-auto'
											value='Add' name='inner' onClick='changeAction()' />

										<button type='button' class='btn btn-danger'
											data-dismiss='modal'>Close</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<table class='table table-sm' border='1'>
					<thead class='thead-dark'>
						<th scope='col' id="toggle">Toggle <input type='checkbox'
							id='main' name='index[]' onClick='toggle(this,filters.value)'
							checked /><span id="nChecked"></span><br /></th>
						<th scope='col'>File name</th>
						
</body>
<script type="text/javascript">

$('[id="inputFilter"]').on('change', function() {
  string=this.value;
  if(string=="All"){
    document.getElementById("inputFilter").selectedIndex=0;
    for(i=0;i<collezioni.length;i++){
      selector=collezioni[i].replace(/ /gm,'.');
      selector="."+selector;
      $(selector).show();
    }
  }else{
    for(i=0;i<collezioni.length;i++){
      selector=collezioni[i].replace(/ /gm,'.');
      selector="."+selector;
      if(collezioni[i]==string){
        $(selector).show();
      }else{
        $(selector).hide();
      }
    }
  }
  })

$('[name="collname"]').on('change', function() {
    if ($(this).val()=='new') {
      document.getElementById('newcollection').style["display"]="inline";
        document.getElementById('newcollection').setAttribute("required","required");
    }else{
      document.getElementById('newcollection').style["display"]="none";
      document.getElementById('newcollection').removeAttribute("required");
    }
  })

  $('[name="index[]"]').on('change',function(){
    var num=$('input[name="index[]"]:checked').length;
    if($('#main').is(':checked')){
      num=num-1;
    }
    document.getElementById("nChecked").innerHTML=(num);
  })


function toggle(source,filter) {
  checkboxes = document.getElementsByName('index[]');
  if(filter=='All'){
    for(var i=0, n=checkboxes.length;i<n;i++) {
      checkboxes[i].checked = source.checked;
    }
  }else{
    for(var i=0, n=checkboxes.length;i<n;i++) {
      if(checkboxes[i].className==filter){
        checkboxes[i].checked = source.checked;
      }
    }

  }
}

function changeAction()
{
   
    document.Form1.submit();        // Submit the page
    return true;
}

function filter(string){

  if(string=="All"){
    document.getElementById("inputFilter").selectedIndex=0;
    for(i=0;i<collezioni.length;i++){
      selector=collezioni[i].replace(/ /gm,'.');
      selector="."+selector;
      $(selector).show();
    }
  }else{
    for(i=0;i<collezioni.length;i++){
      selector=collezioni[i].replace(/ /gm,'.');
      selector="."+selector;
      if(collezioni[i]==string){
        $(selector).show();
      }else{
        $(selector).hide();
      }
    }
  }
}
</script>
</html>